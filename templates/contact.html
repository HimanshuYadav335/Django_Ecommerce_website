{% extends 'base.html' %}
{% load static %}
{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'css/contact.css' %}">

<section>
    <div class="container text-center">
        <div class="row">
            <div class="col-12 h-100" style="margin-top: 100px">
                <h2 class="h1-responsive font-weight-bold text-center my-4">Contact us</h2>
                <p class="text-center w-responsive mx-auto mb-5">Do you have any questions? Please do not hesitate
                    to contact us directly. Our team will come back to you within a matter of hours to help you.</p>

                <form method="post" action="{% url 'contact' %}" onsubmit="return validation()" novalidate>
                    {% csrf_token %}
                    <input type="hidden" value="hy158003@gmail.com" name="owner_email">
                    <div class="mb-3">
                        <label for="name" class="form-label">Your name:</label>
                        <input type="text" class="form-control" name="name" id="name">
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">Email address</label>
                        <input type="email" class="form-control" name="email" id="email"
                               aria-describedby="emailHelp">
                               <div class="col-12" style="color: red;"><h5 id="emailerror"></h5></div>

                        <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div>
                    </div>
                    <div class="mb-3">
                        <label for="message" class="form-label">Message</label>
                        <input type="text" class="form-control" name="message" id="message">
                    </div>
                    <div class="col-12" style="color: red;"><h5 id="error"></h5></div>
                    <button type="submit" class="btn btn-primary">Submit</button>
                </form>
            </div>
        </div>
    </div>
</section>
<script>
  function validation() {
      var name = document.getElementById("name").value;
      var email = document.getElementById('email').value;
      var message = document.getElementById('message').value;
      var error = document.getElementById('error');
      var emailerror = document.getElementById("emailerror");
      var emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;

      if (name === "" || email === "" || message === "") {
          error.innerHTML = "Any field can't be empty";
          return false;
      } 
      
      if (!emailPattern.test(email)) {
          emailerror.innerHTML = "Please enter a valid email";
          return false;
      } else if (!isValidTopLevelDomain(email)) {
          emailerror.innerHTML = "Please enter a valid email";
          return false;
      }

      // Clear any previous error messages
      error.innerHTML = "";
      emailerror.innerHTML = "";
      return true;
  }

  function isValidTopLevelDomain(email) {
      var parts = email.split('.');
      if (parts.length < 3) {
          return false;
      }
      var topLevelDomain = parts[parts.length - 1];
      return topLevelDomain.length >= 2; // You can adjust this based on your validation criteria
  }
</script>

{% endblock %}
