{% extends 'base.html' %}
{% load static %}
{% block content %}
<script src="https://kit.fontawesome.com/d4a674888d.js" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.7.0.js" integrity="sha256-JlqSTELeR4TLqP0OG9dxM7yDPqX1ox/HfgiSLBj8+kM=" crossorigin="anonymous"></script>

<!-- <link rel="stylesheet" href="{% static 'css\all.min.css' %}"> -->
<style>
  * {
    margin: 0%;
    padding: 0%;
  }

  .hover-shadow {
    transition: box-shadow 0.3s;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    font-weight: bold;
    border-radius: 2%;
  }

  .hover-shadow:hover {
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);


  }

  .cart-button {
    background-color: #4caf50;
    color: white;
    border: none;
    text-decoration: none;
    padding: 10px 20px;
    font-size: 16px;
    font-weight: bolder;
    border-radius: 4px;
    transition: background-color 0.3s;
    box-shadow: 0 0 10px rgba(40, 39, 39, 0.5);

  }

  .cart-button:hover {
    background-color: #45a049;
  }
</style>


<div class="mx-3" style="position: relative; ">
  <div class="row mt-5">
    {% for i in fm %}
    <div class="col-xxl-4 col-xl-4 col-lg-6 col-md-6 col-xs-12 col-sm-12 container mt-3 ">
      <div class="card h-100 hover-shadow container p-5">
        <img src="{% static 'images/' %}{{ i.pimage }}" alt="..." class="img-fluid mx-auto" style="height: 50%;;">
        <div class="card-body d-flex flex-column">
          <!-- <h5 class="card-title">Card title</h5> -->
          <p class="card-text "
            style="overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; font-size:20px">
            {{i.pdetail}}</p>
          <P style="color: rgb(239, 194, 78);"><i class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i
              class="fa-solid fa-star"></i><i class="fa-solid fa-star"></i><i class="fa-solid fa-star-half-stroke"></i>
          </P>
          <p class="mt-1" style="font-weight: bold; font-size: 35px;">${{i.pprice}}</p>
          <a href="{% url 'detail' i.pid %}" class="text-center btn-primary mt-3 w-50 cart-button">Add to cart</a>

        </div>
      </div>
    </div>
    {% endfor %}
    <script>
      function generaterandom() {
        var randomNumber = Math.floor(Math.random() * 10) + 8923.99;
        document.getElementById('random').innerHTML = randomNumber;
      }
    </script>
    <script>
     $(document).ready(function(){
      $(".cart-button").click(function(event){
        event.preventDefault(); 
        var cartbutton=$(this);
        $.ajax({
          type:"GET",
          url:cartbutton.attr('href'),
          data:null,
          dataType:"json",
          success: function (response) {
                    console.log(response['response']);
                },
           error: function (response) {
                    alert("error");
                }
        });
      });
     });
    </script>
    {% endblock %}